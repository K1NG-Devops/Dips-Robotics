{% extends 'base.html' %}
{% load static %}

{% block content %}
{% include 'sidebar.html' %}
<div class="content-wrapper">
    <section class="content">
        <div class="container-fluid">
            <div class="row justify-content-center content-header">
                <div class="col-md-3">
                    <div class="card card-primary card-outline">
                        <div class="card-body box-profile">
                            <img src="{% static 'staff/img/dips_logo.png' %}" alt="Dips Logo" class="img-circle elevation-2 login-png" style="height: 50px; width: 70px;">
                            <div class="text-center">
                                {% if student.profile_picture_url %}
                                <img class="profile-user-img img-fluid img-circle" src="{{ student.profile_picture_url }}" alt="User profile picture">
                                {% else %}
                                <img class="profile-user-img img-fluid img-circle" src="{% static 'staff/img/user4-128x128.jpg' %}" alt="Default profile picture">
                                {% endif %}
                            </div>
                            <div class="profile-content">
                                <h5 class="profile-username text-center">{{ student.first_name }} {{ student.last_name }}</h5>
                                <p><strong>Name:</strong> {{ student.first_name }}  {{ student.last_name }}</p>
                                <p><strong>DOB:</strong> {{ student.dob }}</p>
                                <p><strong>Grade</strong> {{ student.grade }}</p>
                                {% if student.qr_code %}
                                <img src="{{ student.qr_code.url }}" alt="QR Code for {{ student.first_name }} {{ student.last_name }}" style="width: 120px; height: 120px; margin-top: -10px;">
                                {% else %}
                                <p>QR Code not available</p>
                                {% endif %}
                            </div>
                            <form method="post" enctype="multipart/form-data" action="{% url 'profile_picture_upload' %}">
                                {% csrf_token %}
                                <label for="newProfilePic">Upload New Profile Picture:</label>
                                <input type="file" id="newProfilePic" name="newProfilePic" accept="image/*">
                                <button type="submit" class="btn btn-primary">Upload</button>
                            </form>
                            <button type="button" class="btn btn-primary btn-block" style="margin-top: 15px;"><b>Print</b></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
{% endblock %}